{% extends '/auth/base_auth.html.twig' %}

{% block title %}Login - SB Admin Pro{% endblock %}

{% block body %}
    <div id="layoutAuthentication">
        <div id="layoutAuthentication_content">
            <main>

                <div class="container-xl px-4">

                    <div class="row justify-content-center">

                        <div class="col-xl-5 col-lg-6 col-md-8 col-sm-11">
                            {% for message in app.session.flashBag.get('error') %}
                                <div class="alert alert-danger alert-overlay" role="alert">
                                    {{ message }}
                                </div>
                            {% endfor %}
                            <!-- Social login form-->
                            <div class="card my-5">
                                <div class="card-body p-5 text-center">
                                    <a class="btn btn-dark w-100 d-flex align-items-center justify-content-center" href="{{ path('google_login') }}" style="background: #333; color: #fff;">
                                        <i class="fab fa-google fa-fw me-2"></i> Login with Google
                                    </a>
                                </div>
                                <hr class="my-0" />
                                <div class="card-body p-5">
                                    <!-- Login form-->
                                    <form method="post" action="{{ path('login') }}">
                                        <!-- Form Group (email address)-->
                                        <div class="mb-3">
                                            <label class="text-gray-600 small" for="emailExample">Email address</label>
                                            <input class="form-control form-control-solid" type="text" name="_username" placeholder="" aria-label="Email Address" aria-describedby="emailExample" required />
                                        </div>
                                        <!-- Form Group (password)-->
                                        <div class="mb-3">
                                            <label class="text-gray-600 small" for="passwordExample">Password</label>
                                            <input class="form-control form-control-solid" type="password" name="_password" placeholder="" aria-label="Password" aria-describedby="passwordExample" required />
                                        </div>
                                        <input type="hidden" name="_csrf_token"
                                               value="{{ csrf_token('authenticate') }}">
                                        <!-- Form Group (forgot password link)-->
                                        <div class="mb-3"><a class="small" href="{{ path('forgot_password') }}">Forgot your password?</a></div>
                                        <!-- Form Group (login box)-->
                                        <div class="d-flex align-items-center justify-content-between mb-0">
                                            <div class="form-check">
                                                <input class="form-check-input" id="checkRememberPassword" type="checkbox" name="_remember_me" />
                                                <label class="form-check-label" for="checkRememberPassword">Remember password</label>
                                            </div>
                                            <button class="btn btn-primary" type="submit">Login</button>
                                        </div>
                                        <div class="mt-3">
                                            <div class="g-recaptcha" data-sitekey="{{ site_key }}"></div>
                                        </div>

                                        <script src="https://www.google.com/recaptcha/api.js" async defer></script>

                                    </form>
                                </div>
                                <hr class="my-0" />
                                <div class="card-body px-5 py-4">
                                    <div class="small text-center">
                                        New user?
                                        <a href="{{ path('tosignup') }}">Create an account!</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
        <div id="layoutAuthentication_footer">
            <footer class="footer-admin mt-auto footer-dark">
                <div class="container-xl px-4">
                    <div class="row">
                        <div class="col-md-6 small">Copyright &copy; Your Website 2021</div>
                        <div class="col-md-6 text-md-end small">
                            <a href="#!">Privacy Policy</a>
                            &middot;
                            <a href="#!">Terms &amp; Conditions</a>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <style>
        .alert-overlay {
            position: fixed;
            top: 20px; /* Fixed position for fade-in */
            left: 50%;
            transform: translateX(-50%);
            z-index: 1050;
            width: 80%;
            max-width: 400px;
            padding: 15px;
            text-align: center;
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            animation: fade-in 0.5s ease-out, hold 3.5s linear 0.5s, fade-out 0.5s ease-in 4s;
        }

        @keyframes fade-in {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes hold {
            from {
                opacity: 1;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fade-out {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const alert = document.querySelector('.alert-overlay');
            if (alert) {
                alert.addEventListener('animationend', (event) => {
                    if (event.animationName === 'fade-out') {
                        alert.remove(); // Remove the alert after the fade-out animation ends
                    }
                });
            }
        });
    </script>
{% endblock %}